---
title: 位运算
index_img: 'https://s1.ax1x.com/2022/06/16/XHagzT.jpg'
banner_img: 'https://s1.ax1x.com/2022/06/17/XbZnyT.jpg'
categories:
  - 算法
tags:
  - 笔记
abbrlink: 2633a26
date: 2022-06-16 16:42:53
---

记录位运算的一些知识点。

<!-- more -->

## 位运算

现代计算机中所有的数据二进制的形式存储，即 0、1 两种状态。位运算是二进制的运算。

| 符号 | 描述 | 运算规则                                                     |
| ---- | ---- | ------------------------------------------------------------ |
| &    | 与   | 两个位都为1时，结果才为1                                     |
| \|   | 或   | 两个位都为0时，结果才为0                                     |
| ^    | 异或 | 两个位相同为0，相异为1                                       |
| ~    | 取反 | 0变1，1变0                                                   |
| <<   | 左移 | 各二进位全部左移若干位，高位丢弃，低位补0                    |
| >>   | 右移 | 各二进位全部右移若干位，对无符号数，高位补0，有符号数，各编译器处理方法不一样，有的补符号位（算术右移），有的补0（逻辑右移） |



### 与运算的用途：

1. 清零

如果想将一个单元清零，即使其全部二进制位为0，只要与一个各位都为零的数值相与，结果为零。

2. 取一个数的指定位

比如取数 X=1010 1110 的低4位，只需要另找一个数Y，令Y的低4位为1，其余位为0，即Y=0000 1111，然后将X与Y进行按位与运算（X&Y=0000 1110）即可得到X的指定位。

3. 判断奇偶

只要根据最未位是0还是1来决定，为0就是偶数，为1就是奇数。因此可以用if ((a & 1) == 0)代替if (a % 2 == 0)来判断a是不是偶数。

### 或运算的用途：

1. 常用来对一个数据的某些位设置为1

比如将数 X=1010 1110 的低4位设置为1，只需要另找一个数Y，令Y的低4位为1，其余位为0，即Y=0000 1111，然后将X与Y进行按位或运算（X|Y=1010 1111）即可得到。

### 异或的几条性质:

1. 交换律

2. 结合律 (a^b)^c == a^(b^c)

3. 对于任何数x，都有 x^x=0，x^0=x

4. 自反性: a^b^b=a^0=a;

### 异或运算的用途：

1. 翻转指定位

比如将数 X=1010 1110 的低4位进行翻转，只需要另找一个数Y，令Y的低4位为1，其余位为0，即Y=0000 1111，然后将X与Y进行异或运算（X^Y=1010 0001）即可得到。

2. 与0相异或值不变

例如：1010 1110 ^ 0000 0000 = 1010 1110

3. 交换两个数



## 如何打印32位整数

```java
    public static void print(int num){
        for (int i = 31; i >= 0; i--) {
            System.out.print((num & (1 << i)) == 0 ? "0" : "1");
        }
        System.out.println();

    }
```



## 反码和补码

### 原码：

**是最简单的机器数表示法，用最高位表示符号位，其他位存放该数的二进制的绝对值。**

### 反码

**正数的反码还是等于原码；负数的反码就是它的原码除符号位外，按位取反。**

以带符号位的四位二进制数为例：3是正数，反码与原码相同，则可以表示为0011；-3的原码是1011，符号位保持不变，低三位按位取反，所以-3的反码为1100。

### 反码的特点：

1. 在反码表示中，用符号位表示数值的正负，形式与原码表示相同，即0为正；1为负。 

2. 在反码表示中，数值0有两种表示方法。

3. 反码的表示范围与原码的表示范围相同。
4. **反码表示在计算机中往往作为数码变换的中间环节。**

### 补码

**正数的补码等于它的原码；负数的补码等于反码+1**（这只是一种算补码的方式，多数书对于补码就是这句话）。

### **补码的特点：**

1. 在补码表示中，用符号位表示数值的正负，形式与原码的表示相同，即0为正，1为负。但补码的符号可以看做是数值的一部分参加运算。

> 正数的补码表示就是其本身，负数的补码表示的实质是把负数映像到正值区域，因此加上一个负数或减去一个正数可以用加上另一个数（负数或减数对应的补码）来代替。
> 从补码表示的符号看，补码中符号位的值代表了数的正确符号，0表示正数，1表示负数；而从映像值来看，符号位的值是映像值的一个数位，因此在补码运算中，符号位可以与数值位一起参加运算。

2. 在补码表示中，数值0只有一种表示方法。

3. 负数补码的表示范围比负数原码的表示范围略宽。纯小数的补码可以表示到-1，纯整数的补码可以表示到-2^n。

4. 由于补码表示中的符号位可以与数值位一起参加运算，并且可以将减法转换为加法进行运算，简化了运算过程，因此**计算机中均采用补码进行加减运算**。

### 为什么负数的补码的求法是反码+1

因为负数的反码加上这个负数的绝对值正好等于1111，在加1，就是10000，也就是四位二进数的模，而负数的补码是它的绝对值的同余数，可以通过模减去负数的绝对值得到它的补码，所以负数的补码就是它的反码+1。